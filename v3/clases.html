<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LexiMus</title>
    <link rel="icon" type="image/svg+xml" href="https://raw.githubusercontent.com/iccmu/LexiMus/main/static/LexiMus-Logo-Horiizontal.svg">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }

        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }

        ul {
            list-style-type: none;
            padding-left: 25px;
        }

        li {
            margin: 8px 0;
            position: relative;
            transition: all 0.2s ease;
        }

        li > span {
            display: block;
            padding: 8px 12px;
            border-radius: 6px;
            background-color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        li > span:hover {
            background-color: #f8f9fa;
            transform: translateX(5px);
        }

        /* Indicador visual para elementos con submen√∫s */
        li > span::before {
            content: '‚ñ∏';
            display: inline-block;
            margin-right: 8px;
            transition: transform 0.2s ease;
            color: #666;
        }

        /* Rotar el indicador cuando el men√∫ est√° expandido */
        li.expanded > span::before {
            transform: rotate(90deg);
        }

        .hidden {
            display: none;
        }

        /* L√≠neas conectoras */
        ul ul::before {
            content: '';
            position: absolute;
            left: -12px;
            top: 0;
            bottom: 0;
            width: 2px;
            background-color: #e9ecef;
        }

        /* Niveles de profundidad con diferentes colores */
        li > span {
            border-left: 4px solid #3498db;
        }

        li li > span {
            border-left: 4px solid #2ecc71;
        }

        li li li > span {
            border-left: 4px solid #e74c3c;
        }

        li li li li > span {
            border-left: 4px solid #f1c40f;
        }

        /* Animaci√≥n suave al expandir/colapsar */
        ul.expanding {
            animation: expand 0.3s ease-out;
        }

        @keyframes expand {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Estilo para el mensaje temporal */
        .temp-message {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            animation: fadeInOut 1.5s ease-in-out;
            pointer-events: none;
        }

        @keyframes fadeInOut {
            0% { opacity: 0; transform: translate(-50%, 20px); }
            15% { opacity: 1; transform: translate(-50%, 0); }
            85% { opacity: 1; transform: translate(-50%, 0); }
            100% { opacity: 0; transform: translate(-50%, -20px); }
        }

        /* Nuevo estilo para los enlaces */
        .class-link {
            color: #2c3e50;
            text-decoration: none;
            display: inline-block;
            margin-left: 10px;
            font-size: 0.8em;
            opacity: 0.7;
        }

        .class-link:hover {
            opacity: 1;
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <img src="https://raw.githubusercontent.com/iccmu/LexiMus/main/static/LexiMus-Logo-Horiizontal.svg" 
         alt="LexiMus Logo" 
         style="max-width: 300px; 
                margin: 30px auto; 
                display: block;
                height: auto;">
    <ul id="hierarchy">
        <li>
            Los nombres de la m√∫sica
            <ul class="hidden">
                <li>
                    La faceta eventiva de la m√∫sica
                    <ul class="hidden">
                        <li>
                            El evento, la acci√≥n o el proceso musical
                            <ul class="hidden">
                                <li>Verbos de acci√≥n y/o interpretaci√≥n musical (generales, particulares o con carga valorativa)</li>
                                <li>Verbos de percepci√≥n pasiva y/o activa</li>
                                <li>Verbos de manipulaci√≥n</li>
                                <li>Verbos de fabricaci√≥n y ajuste</li>
                                <li>Verbos relacionados con la m√∫sica como actividad empresarial</li>
                            </ul>
                        </li>
                        <li>
                            Agentes y experimentadores
                            <ul class="hidden">
                                <li>
                                    Agentes
                                    <ul class="hidden">
                                        <li>
                                            Productores
                                            <ul class="hidden">
                                                <li>Agentes creadores o poi√©ticos</li>
                                                <li>Agentes int√©rpretes</li>
                                                <li>Agentes creadores e int√©rpretes</li>
                                                <li>Agentes seg√∫n su funci√≥n</li>
                                                <li>Agentes instrumentistas</li>
                                                <li>Agentes colectivos</li>
                                                <li>Agentes seg√∫n su habilidad creadora o interpretativa</li>
                                            </ul>
                                        </li>
                                        <li>
                                            No productores
                                            <ul class="hidden">
                                                <li>Cient√≠ficos, comentaristas y pedagogos</li>
                                                <li>Constructores</li>
                                                <li>Empresarios y gestores</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li>Experimentadores</li>
                            </ul>
                        </li>
                        <li>El resultado del evento musical</li>
                        <li>
                            Los instrumentos y medios materiales de la acci√≥n musical
                            <ul class="hidden">
                                <li>
                                    Familias organol√≥gicas
                                    <ul class="hidden">
                                        <li>Idi√≥fonos (y sus componentes)</li>
                                        <li>Membran√≥fonos (y sus componentes)</li>
                                        <li>Cord√≥fonos (y sus componentes)</li>
                                        <li>Aer√≥fonos (y sus componentes)</li>
                                        <li>Electr√≥fonos (y sus componentes)</li>
                                        <li>Otros dispositivos organol√≥gicos</li>
                                    </ul>
                                </li>
                                <li>Otros medios materiales que facilitan la actividad musical</li>
                                <li>Otros dispositivos empleados para la grabaci√≥n y reproducci√≥n</li>
                            </ul>
                        </li>
                        <li>
                            Las localizaciones donde se produce el evento musical
                            <ul class="hidden">
                                <li>Espacios de la m√∫sica</li>
                                <li>Ubicaciones espacio-temporales</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li>
                    La m√∫sica como ente ac√∫stico
                    <ul class="hidden">
                        <li>
                            Dimensi√≥n espacial del dato sonoro
                            <ul class="hidden">
                                <li>Alturas o notas musicales y alteraciones</li>
                                <li>Cualidades ac√∫sticas del dato sonoro o derivadas de la serie arm√≥nica</li>
                                <li>Sistemas de afinaci√≥n</li>
                                <li>Interv√°lica y su percepci√≥n psico auditiva</li>
                                <li>Escalas y grados de la escala</li>
                                <li>Modos</li>
                                <li>
                                    Armon√≠a
                                    <ul class="hidden">
                                        <li>Combinaciones de dos notas/Intervalos</li>
                                        <li>Grados del acorde</li>
                                        <li>
                                            Acordes
                                            <ul class="hidden">
                                                <li>Seg√∫n el n√∫mero de notas</li>
                                                <li>Seg√∫n la configuraci√≥n interna</li>
                                                <li>Seg√∫n su funci√≥n</li>
                                                <li>Acordes individuados</li>
                                                <li>Inversiones y disposiciones del acorde</li>
                                                <li>Otros acordes marcados</li>
                                            </ul>
                                        </li>
                                        <li>Tonalidades / Modos</li>
                                        <li>Funciones o relaciones tonales</li>
                                        <li>Derivadas mel√≥dicas de las estructuras arm√≥nicas</li>
                                        <li>T√©cnicas compositivas relativas a la armon√≠a</li>
                                    </ul>
                                </li>
                                <li>S√≠mbolos y convenciones gr√°ficas de la notaci√≥n musical relativos a la dimensi√≥n espacial de la m√∫sica</li>
                                <li>T√©cnicas o sistemas empleados para cifrar acordes o codificar informaci√≥n arm√≥nica</li>
                                <li>Ornamentos, alteraciones o modificaciones relativas a la afinaci√≥n de las alturas musicales lexicalizadas y/o convencionalizadas como indicaciones interpretativas</li>
                            </ul>
                        </li>
                        <li>
                            Dimensi√≥n temporal del dato sonoro
                            <ul class="hidden">
                                <li>Figuras r√≠tmicas, silencios y divisiones de las figuras r√≠tmicas</li>
                                <li>
                                    Compases
                                    <ul class="hidden">
                                        <li>Tipos de compases</li>
                                        <li>Tiempos del comp√°s</li>
                                        <li>Fen√≥menos contram√©tricos</li>
                                    </ul>
                                </li>
                                <li>Ornamentos, alteraciones o modificaciones relativas a las figuras musicales o el ritmo en general</li>
                                <li>
                                    Combinaciones r√≠tmicas
                                    <ul class="hidden">
                                        <li>C√©lulas r√≠tmicas</li>
                                        <li>Patrones y esquemas r√≠tmicos o grooves</li>
                                    </ul>
                                </li>
                                <li>
                                    Tempo musical
                                    <ul class="hidden">
                                        <li>Indicaciones metron√≥micas</li>
                                        <li>
                                            Indicaciones discursivas de tempo y ag√≥gica
                                            <ul class="hidden">
                                                <li>Movimiento uniforme</li>
                                                <li>Aumento o disminuci√≥n progresiva del movimiento</li>
                                                <li>Suspensi√≥n de la regularidad del movimiento</li>
                                                <li>Breve y s√∫bito cambio en el movimiento</li>
                                                <li>Restablecimiento de la regularidad o vuelta al tiempo original</li>
                                                <li>Desv√≠os del pulso regular</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li>S√≠mbolos y convenciones de la notaci√≥n musical que codifican el ritmo musical</li>
                            </ul>
                        </li>
                        <li>
                            Dimensi√≥n espacio-temporal del dato sonoro del dato sonoro aislado o en contexto
                            <ul class="hidden">
                                <li>Denominaciones de la ac√∫stica que describen la altura y el tiempo de las se√±ales sonoras</li>
                                <li>Cadencias</li>
                                <li>Progresiones</li>
                                <li>
                                    Denominaciones relativas a la Melod√≠a
                                    <ul class="hidden">
                                        <li>Tipos de melod√≠a seg√∫n su extensi√≥n</li>
                                        <li>Tipos de melod√≠a en relaci√≥n con la escala o acorde</li>
                                        <li>Tipos de melod√≠a en relaci√≥n con su propia estructura</li>
                                        <li>Tipos de melod√≠a en relaci√≥n con elementos extramusicales</li>
                                        <li>Ornamentos mel√≥dicos</li>
                                        <li>Melod√≠as o secuencias individuadas</li>
                                    </ul>
                                </li>
                                <li>
                                    Denominaciones relativas a la Textura
                                    <ul class="hidden">
                                        <li>Las partes, voces o funciones musicales</li>
                                        <li>La manera en que se relacionan las partes musicales</li>
                                    </ul>
                                </li>
                                <li>S√≠mbolos y convenciones gr√°ficas de la notaci√≥n musical relativas a la dimension espacio-temporal del dato sonoro</li>
                            </ul>
                        </li>
                        <li>
                            Otras dimensiones del dato sonoro aislado o en contexto
                            <ul class="hidden">
                                <li>Intensidad</li>
                                <li>Timbre</li>
                                <li>
                                    Car√°cter
                                    <ul class="hidden">
                                        <li>Denominaciones relativas al car√°cter general de una obra o pasaje</li>
                                        <li>Denominaciones relativas al fraseo o la articulaci√≥n musical</li>
                                    </ul>
                                </li>
                                <li>S√≠mbolos y convenciones gr√°ficas relativas a otras dimensiones del dato sonoro</li>
                            </ul>
                        </li>
                        <li>
                            Estilos musicales
                            <ul class="hidden">
                                <li>
                                    Variables en el dise√±o sem√°ntico de los t√©rminos relativos a los estilos musicales
                                    <ul class="hidden">
                                        <li>La dimensi√≥n espacial (armon√≠a)</li>
                                        <li>La dimensi√≥n temporal (ritmo y tempo)</li>
                                        <li>La dimensi√≥n espacio-temporal (melod√≠a, ritmo arm√≥nico y textura)</li>
                                        <li>Otras dimensiones (timbre)</li>
                                        <li>La forma</li>
                                        <li>Lo extramusical</li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li>
                            Continentes de la expresi√≥n musical: formas y unidades
                            <ul class="hidden">
                                <li>
                                    Continentes con morfolog√≠a especificada o formas musicales estructuradas
                                    <ul class="hidden">
                                        <li>La dimensi√≥n espacial en las formas musicales</li>
                                        <li>La dimensi√≥n temporal en las formas musicales</li>
                                        <li>La dimensi√≥n espacio-temporal en las formas musicales</li>
                                        <li>Lo extramusical en las formas musicales (elementos textuales, coreogr√°ficos, etc.)</li>
                                    </ul>
                                </li>
                                <li>
                                    Continentes sin morfolog√≠a especificada o unidades musicales
                                    <ul class="hidden">
                                        <li>Unidades musicales seg√∫n efectivos musicales</li>
                                        <li>Unidades musicales seg√∫n su extensi√≥n o disposici√≥n interna</li>
                                        <li>Lo extramusical en las unidades musicales</li>
                                    </ul>
                                </li>
                                <li>Unidades musicales banalizadas</li>
                                <li>Segmentaciones de los continentes musicales</li>
                                <li>S√≠mbolos y convenciones gr√°ficas de la notaci√≥n musical relativas a la segmentaci√≥n de los continentes</li>
                            </ul>
                        </li>
                        <li>
                            G√©neros musicales
                            <ul class="hidden">
                                <li>Los g√©neros como entidades multidimensionales</li>
                                <li>
                                    G√©nero como t√©rmino comod√≠n
                                    <ul class="hidden">
                                        <li>Intercambiable con estilo</li>
                                        <li>Intercambiable con forma/continente</li>
                                        <li>Intercambiable con plantilla/medios musicales</li>
                                    </ul>
                                </li>
                                <li>G√©nero como t√©rmino superordinado</li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>

    <script>
        // Cargar el CSV de mapeo
        let urlMapping = new Map();
        const BASE_URL = "https://raw.githubusercontent.com/iccmu/LexiMus/refs/heads/main/v3/leximus_pages";

        fetch('leximus_mapping.csv')
            .then(response => response.text())
            .then(csv => {
                // Parsear el CSV
                const lines = csv.split('\n');
                const headers = lines[0].split(',');
                
                for(let i = 1; i < lines.length; i++) {
                    const values = lines[i].split(',');
                    if(values.length >= 4) {
                        urlMapping.set(values[0], values[3]); // name -> page_url
                    }
                }

                // Una vez cargado el CSV, procesar los elementos
                processElements();
            });

        function processElements() {
            document.querySelectorAll('#hierarchy li').forEach((item, index) => {
                const text = item.childNodes[0].textContent.trim();
                const children = item.querySelector('ul');
                
                // Crear el span con el texto y el enlace
                if (item.childNodes[0].nodeType === 3) {
                    const span = document.createElement('span');
                    const id = text
                        .toLowerCase()
                        .normalize('NFD')
                        .replace(/[\u0300-\u036f]/g, '')
                        .replace(/[^a-z0-9]+/g, '_')
                        .replace(/^_+|_+$/g, '');
                    
                    const pageUrl = urlMapping.get(text) || 
                                   `${BASE_URL}/${id}.html`;
                    
                    span.innerHTML = `${text} <a href="${pageUrl}" 
                                        class="class-link" 
                                        title="Ver definici√≥n"
                                        target="_blank">üîó</a>`;
                    item.insertBefore(span, item.childNodes[0]);
                    item.removeChild(item.childNodes[1]);
                }

                // Evento click (sin cambios)
                item.querySelector('span').addEventListener('click', function(event) {
                    if (children) {
                        children.classList.toggle('hidden');
                        children.classList.add('expanding');
                        item.classList.toggle('expanded');
                    } else {
                        const message = document.createElement('div');
                        message.className = 'temp-message';
                        message.textContent = 'No hay m√°s subniveles';
                        document.body.appendChild(message);
                        
                        setTimeout(() => {
                            message.remove();
                        }, 1500);
                    }
                    event.stopPropagation();
                });
            });
        }
    </script>
</body>
</html>